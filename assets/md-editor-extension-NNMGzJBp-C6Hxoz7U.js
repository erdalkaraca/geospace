import{J as f,x as p,E as l,M as c,I as h}from"./index-CUNXveE1.js";import{m as C,F as m,u,v}from"./geospace-app-DrLdvsxT.js";import"./preload-helper-WQhrSmCl.js";import"./chunk.LTSJC6DR-BTS7fm5P.js";import"./chunk.RRCUZAZD-5O78oK5S.js";var g=Object.defineProperty,y=Object.getOwnPropertyDescriptor,d=(t,e,s,n)=>{for(var o=n>1?void 0:n?y(e,s):e,a=t.length-1,i;a>=0;a--)(i=t[a])&&(o=(n?i(e,s,o):i(o))||o);return n&&o&&g(e,s,o),o};v.registerEditorInputHandler({canHandle:t=>t instanceof m&&t.getName().toLowerCase().endsWith(".md"),handle:async t=>{const e={title:t.getName(),data:t,key:t.getName(),editorId:"md-editor",icon:"book",noOverflow:!1,state:{}};return e.widgetFactory=()=>p`
            <k-md-editor .input=${e}></k-md-editor>`,e},ranking:1e3});let r=class extends C{doClose(){this.input=void 0,this.mdContents=void 0}doBeforeUI(){this.loadContent()}async loadContent(){const t=this.input.data;if(t instanceof m){const e=await t.getContents();this.updateContents(e)}else if(typeof t=="string"&&t.startsWith("http")){const s=await(await fetch(t)).text();this.updateContents(s)}else typeof t=="string"&&this.updateContents(t)}render(){return p`
            <div style="padding: 10px;">${f(this.mdContents)}</div>`}updateContents(t){this.mdContents=u.parse(t)}};d([l({attribute:!1})],r.prototype,"input",2);d([c()],r.prototype,"mdContents",2);r=d([h("k-md-editor")],r);export{r as KMDEditor};
