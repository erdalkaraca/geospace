import{F as p,o as c,x as f,n as m,c as h,t as l}from"./index-CWmBQ8ze.js";import{e as u,m as v,i as C}from"./main-BT42FCUR.js";var g=Object.defineProperty,y=Object.getOwnPropertyDescriptor,d=(t,e,n,o)=>{for(var s=o>1?void 0:o?y(e,n):e,a=t.length-1,i;a>=0;a--)(i=t[a])&&(s=(o?i(e,n,s):i(s))||s);return o&&s&&g(e,n,s),s};C.registerEditorInputHandler({canHandle:t=>t instanceof p&&t.getName().toLowerCase().endsWith(".md"),handle:async t=>{const e={title:t.getName(),data:t,key:t.getName(),icon:"book",noOverflow:!1,state:{}};return e.widgetFactory=()=>f`
            <k-md-editor .input=${e}></k-md-editor>`,e},ranking:1e3});let r=class extends u{doClose(){this.input=void 0,this.mdContents=void 0}async doAfterUI(){const t=this.input.data;if(t instanceof p){const e=await t.getContents();this.updateContents(e)}else if(typeof t=="string"&&t.startsWith("http")){const n=await(await fetch(t)).text();this.updateContents(n)}else typeof t=="string"&&this.updateContents(t)}render(){return f`
            <div style="max-height: 90vh;">${c(this.mdContents)}</div>`}updateContents(t){this.mdContents=v.parse(t)}};d([m({attribute:!1})],r.prototype,"input",2);d([h()],r.prototype,"mdContents",2);r=d([l("k-md-editor")],r);export{r as KMDEditor};
